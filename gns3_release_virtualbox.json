{
   "variables" : {
      "ssh_pass" : "gns3",
      "ssh_name" : "gns3",
      "gns3_src": "{{env `GNS3_SRC`}}",
      "memory": "2048",
      "cpus": "1",
      "cores": "1"
   },
   "provisioners" : [
     {
        "inline": "sudo apt purge -y open-vm-tools",
        "type": "shell"
      }
   ],
   "builders" : [
      {
          "type": "virtualbox-ovf",
          "ssh_timeout": "20m",
          "ssh_handshake_attempts": "20",
          "vm_name" : "GNS3 VM",
          "headless": true,
          "source_path": "{{user `gns3_src`}}",
          "ssh_username": "{{user `ssh_name`}}",
          "ssh_password": "{{user `ssh_pass`}}",
          "shutdown_command" : "echo {{user `ssh_name`}} | sudo -S shutdown -P now",
          "shutdown_timeout": "60m",
          "format": "ova",
          "guest_additions_mode" : "disable",
          "vboxmanage" : [
             [
               "modifyvm",
               "{{.Name}}",
               "--nic1",
               "nat"
             ]
          ],
          "vboxmanage_post" : [
             [
               "modifyvm",
               "{{.Name}}",
               "--nic1",
               "hostonly"
             ],
             [
               "modifyvm",
               "{{.Name}}",
               "--nictype1",
               "82540EM"
             ],
             [
                "modifyvm",
                "{{.Name}}",
                "--hostonlyadapter1",
                "vboxnet0"
             ],
             [
                "modifyvm",
                "{{.Name}}",
                "--nic2",
                "nat"
             ],
             [
               "modifyvm",
               "{{.Name}}",
               "--nictype2",
               "82540EM"
             ]
          ]
      }
   ]
}
